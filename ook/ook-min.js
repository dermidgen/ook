/*
 http://www.opensource.org/licenses/bsd-license.php New BSD License
 @copyright Copyright (c) 2010, Danny Graham, Scott Thundercloud
*/
ook=new (function(){this.Class=function(){var a=function(){var b=this.initialize?this.initialize:this._construct;if(this.__construct){var d=this.__construct.apply(this,arguments);if(b&&d)b.apply(d,arguments);else b&&b.apply(this,arguments);return d?d:this}b&&b.apply(this,arguments)};a.__mixins=[];a.__interfaces=[];a.__extends=null;a.mixin=function(b){this.__mixins.push(b);return this};a.implement=function(b){this.__interfaces.push(b);return this};a.extend=function(b){this.__extends=b;return this};
a.prototype.__construct=function(){for(var b=function(f){f.isDOM=true;f._parent={};try{for(var g in f)if(typeof f[g]=="function")f._parent[g]=f[g];for(g in this)try{f[g]=this[g]}catch(j){}}catch(k){}return f},d=function(f){this._parent=f;for(var g in f)this[g]||(this[g]=this._parent[g]);return this},c=0;c<a.__mixins.length;c++){if(typeof a.__mixins[c]=="function")var e=eval("new "+a.__mixins[c]+"();");else if(typeof a.__mixins[c]=="object")e=a.__mixins[c];else if(typeof a.__mixins[c]=="string")e=
eval(a.__mixins[c]);if(!e)return;for(var h in e)this[h]=e[h]}if(a.__extends!=null)if(typeof a.__extends!="string")var i=a.__extends.isDOM||a.__extends.tagName?b.apply(this,[a.__extends]):d.apply(this,[a.__extends]);else if(a.__extends.substring(0,5)!="_DOM_"){c=eval("new "+a.__extends+"();");i=c.isDOM?b.apply(this,[c]):d.apply(this,[c])}else i=b.apply(this,[document.createElement(a.__extends.substring(5))]);return i};return a};this.event=this.Class();this.event.prototype._construct=function(){var a=
{};this.dispatch=function(b,d){if(a[b]){var c=d.type;if(a[b][c])for(var e=0;e<a[b][c].listeners.length;e++)(a[b][c].listeners[e][c]?a[b][c].listeners[e][c]:a[b][c].listeners[e])(d)}};this.addListener=function(b,d,c){a[b]||(a[b]={});a[b][d]||(a[b][d]={name:d,listeners:[]});var e;a:{if(a[b])if(a[b][d]){e=a[b][d].listeners;for(var h=0;h<e.length;h++)if(e[h]==c){e=true;break a}}e=false}e||a[b][d].listeners.push(c)};this.removeListener=function(b,d,c){if(a[b])if(a[b][d])for(var e in a[b][d].listeners)a[b][d].listeners[e]==
c&&a[b][d].listeners.splice(e,1)}};this.event=new this.event;this.observable={dispatch:function(a){ook.event.dispatch(this,a)},addListener:function(a,b){ook.event.addListener(this,a,b)},removeListener:function(a,b){ook.event.removeListener(this,a,b)}}});